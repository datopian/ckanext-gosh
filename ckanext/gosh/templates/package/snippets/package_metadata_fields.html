{% if c.userobj %}
<input type="hidden" id="current_user_name" value="{{c.userobj.fullname}}" />
<input type="hidden" id="current_user_email" value="{{c.userobj.email}}" />
{% endif %}

{% import 'macros/form.html' as form %}

{% resource 'gosh/aridhia.js' %}



{% block package_metadata_fields %}

{% block package_metadata_fields_visibility %}
<div class="control-group control-group-slider">
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('Dataset is searchable and browseable by all registered, logged-in users - only if it\'s set as Public')}}</p>
    </div>
  </div>
  <label class="control-label" for="field_range">{{_('Gosh Restricted')}}</label>
  <div class="controls">
    <div class="ui-switch">
      <input type="checkbox" name="restricted" class="checkbox" id="restricted" value="{{data.restricted}}" {% if data.restricted == '1'%}checked="checked"{% endif %}>
             <label class="label" for="restricted">
        <span class="inner"></span>
        <span class="switch"></span>
      </label>
    </div>
    <p class="help-block"></p>
  </div>
</div>
{% endblock %}

{% block package_metadata_fields_url %}

<div class="control-group">
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('If you want, you can add the source URL of the dataset or a URL providing more information about the dataset, such as a departmental website.')}}</p>
    </div>
  </div>
  <label class="control-label" for="url">{{_('URL')}}</label>
  <div class="controls">
    <input id="url" name="url" type="url" placeholder="http://" value="{{data.url}}">
    <p class="help-block">{{_('The source URL of the dataset or a URL providing more information about the dataset, such as a departmental website.')}}</p>
  </div>
</div>

{% endblock %}

{% block package_metadata_author %}
<fieldset>
  <legend>{{_('Creator')}}</legend>
  <div class="control-group control-medium">
    <div class="control-group">
      <div class="controls">
        <a id="assign-creator" class="btn btn-default">{{_('Assign me as creator')}}</a>
      </div>
    </div>
    <div class="control-group-info">
      <a class="control-group-info-toggle"></a>
      <div class="control-group-info-content control-group-info-content-hidden">
        <p>{{_('The name of the person who created this dataset, usually first author. Or in case of living datasets, the manager of the dataset. This may not be the contact person for re-use of this dataset, see publisher. However, creator and publisher could be the same person.')}}</p>
      </div>
    </div>
    <label class="control-label" for="field-author"><span title="This field is required" class="control-required">*</span> {{_('Creator')}}</label>
    <div class="controls ">
      <input id="field-author" type="text" name="author" value="{{data.author}}" placeholder="Joe Bloggs" required>
      <p class="help-block">{{_('The name of the person who created this dataset.')}}</p>
    </div>
  </div>

  <div class="control-group control-medium">
    <div class="control-group-info">
      <a class="control-group-info-toggle"></a>
      <div class="control-group-info-content control-group-info-content-hidden">
        <p>{{_('The contact email for the creator of the dataset')}}</p>
      </div>
    </div>
    <label class="control-label" for="field-author-email"><span title="This field is required" class="control-required">*</span> {{_('Creator Email')}}</label>
    <div class="controls ">
      <input id="field-author-email" type="email" name="author_email" value="{{data.author_email}}" placeholder="joe@example.com" required>
      <p class="help-block">{{_('The contact email for the creator of the dataset')}}</p>
    </div>
  </div>
</fieldset>
{% endblock %}

{% block package_metadata_fields_maintainer %}
<fieldset>
  <legend>{{_('Publisher')}}</legend>
  <div class="control-group control-medium">
    <div class="control-group">
      <div class="controls">
        <a id="assign-publisher" class="btn btn-default">{{_('Assign me as publisher')}}</a>
      </div>
    </div>
    <div class="control-group-info">
      <a class="control-group-info-toggle"></a>
      <div class="control-group-info-content control-group-info-content-hidden">
        <p>{{_('The name of the person publishing the dataset, this is the contact person for approval of re-use of this dataset. This could be the same person as the creator.')}}</p>
      </div>
    </div>
    <label class="control-label" for="field-maintainer"><span title="This field is required" class="control-required">*</span> {{_('Publisher')}}</label>
    <div class="controls ">
      <input id="field-maintainer" type="text" name="maintainer" value="{{data.maintainer}}" placeholder="Joe Bloggs" required>
      <p class="help-block">{{_('The primary point of contact for the dataset and access to it.')}}</p>
    </div>
  </div>

  <div class="control-group control-medium">
    <div class="control-group-info">
      <a class="control-group-info-toggle"></a>
      <div class="control-group-info-content control-group-info-content-hidden">
        <p>{{_('The contact email address of the dataset publisher.')}}</p>
      </div>
    </div>
    <label class="control-label" for="field-maintainer-email"><span title="This field is required" class="control-required">*</span> {{_('Publisher Email')}}</label>
    <div class="controls ">
      <input id="field-maintainer-email" type="email" name="maintainer_email" value="{{data.maintainer_email}}" placeholder="joe@example.com" required>
      <p class="help-block">{{_('The contact email for the publisher of the dataset.')}}</p>
    </div>
  </div>
</fieldset>
{% endblock %}

{% block dataset_fields %}

<div class="control-group control-medium">
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('The number of research participants in the dataset. If possible, a precise number, otherwise an estimate.')}}</p>
    </div>
  </div>
  <label class="control-label" for="number_of_participants">{{_('Number of participants')}}</label>
  <div class="controls">
    <input id="number_of_participants" name="number_of_participants" type="number" min="0" value="{{data.number_of_participants}}">
    <p class="help-block"></p>
  </div>
</div>

<div class="control-group control-medium">
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('The number of records in a dataset. If possible, a precise number, otherwise an estimate.')}}</p>
    </div>
  </div>
  <label class="control-label" for="number_of_records">{{_('Number of records')}}</label>
  <div class="controls">
    <input id="number_of_records" name="number_of_records" type="number" min="0" value="{{data.number_of_records}}">
    <p class="help-block"></p>
  </div>
</div>


<!-- HTML5 input for Range -->
<div class="control-group control-group-slider">
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('Does your dataset contain data on human study participants?')}}</p>
    </div>
  </div>
  <label class="control-label" for="field_range">{{_('Human Research')}}</label>
  <div class="controls">
    <div class="ui-switch">

      <input type="checkbox" name="human_research" class="checkbox" id="human_research" value="{{data.human_research}}" {% if data.human_research == '1'%}checked="checked"{% endif %}>
             <label class="label" for="human_research">
        <span class="inner"></span>
        <span class="switch"></span>
      </label>
    </div>
    <p class="help-block"></p>
  </div>
</div>


<div class="control-group control-full">
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('Locations that are covered by this dataset, usually the geographical locations where you collected the data. May not be relevant to the findability of your dataset.')}}</p>
    </div>
  </div>

  <label class="control-label" for="spatial_coverage">{{_('Spatial Coverage')}}</label>
  <div class="controls editor">

    <textarea id="spatial_coverage" name="spatial_coverage" cols="20" rows="5" placeholder="">{{data.spatial_coverage}}</textarea>
    <span class="editor-info-block"></span>
    <p class="help-block">{{_('Locations that are covered by this dataset.')}}</p>
  </div>
</div>

<div class="control-group">
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('The primary language of data in the data set, please choose an option from the list.')}}</p>
    </div>
  </div>
  <label class="control-label" for="language">{{ _("Language") }}</label>
  <div class="controls">
    <select id="language" name="language" data-module="autocomplete">
      {% set existing_lang_code = data.get('language') %}
      <option value="">{{_('Choose the dataset language')}}</option>
      {% for item in h.language_options() %}
      <option value="{{ item.code }}" {% if existing_lang_code == item.code %}selected="selected"{% endif %}>{{ item.language }} ({{item.code}})</option>
      {% endfor %}
    </select>
    <p class="help-block">{{_('The primary language of data in the data set.')}}</p>
  </div>
</div>

<fieldset>
  <legend>{{_('Temporal Coverage')}}</legend>
  <!-- HTML5 input for Date picker -->
  <div class="control-group">
    <div class="control-group-info">
      <a class="control-group-info-toggle"></a>
      <div class="control-group-info-content control-group-info-content-hidden">
        <p>{{_('Start and end year of the time period in which this dataset is relevant for (re-)use in research. If this dataset is relevant for others for a long period of time or you are not sure, you can leave the end date blank. The date you enter is purely informative, it has no impact on the availability of your dataset (no changes are made upon expiry).')}}</p>
      </div>
    </div>
    <label class="control-label" for="tc_start">{{_('Start/End')}}</label>
    <div class="controls">
      <div class="input-append">
        <input id="tc_start" name="tc_start" placeholder="Please, enter a year" type="number" value="{{data.tc_start}}" min="0" max="10000" pattern="[0-9]+">
        <button id="clear_tc_start" class="btn btn-danger" type="button">x</button>
      </div>
      <div class="input-append">
        <input id="tc_end" name="tc_end" placeholder="Please, enter a year" type="number" value="{{data.tc_end}}" min="0" max="10000" pattern="[0-9]+">
        <button id="clear_tc_end" class="btn btn-danger" type="button">x</button>
      </div>
      <p class="help-block">{{_('Start and finish year of relevance of dataset.')}}</p>
    </div>
  </div>

</fieldset>

{% endblock %}

{% block package_metadata_fields_custom %}
{% block custom_fields %}
<fieldset>
  <legend>{{_('Custom Fields')}}</legend>
  <div class="control-group-info">
    <a class="control-group-info-toggle"></a>
    <div class="control-group-info-content control-group-info-content-hidden">
      <p>{{_('You can add your own descriptive fields to your dataset, to make sure other users can find your data when searching for these terms. You need to enter a name (e.g. "disease") and a value (e.g. "diabetics") for each descriptive field. These fields will be available in the catalogue and are used for search purposes only.')}}</p>
    </div>
  </div>
  {% snippet 'snippets/custom_form_fields.html', extras=data.extras, errors=errors, limit=3 %}
</fieldset>
{% endblock %}
{% endblock %}

{% endblock %}
